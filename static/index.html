<!DOCTYPE html>
<html>
<head>
<title>Replio Standalone - Electron (Node.js) REPL</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=false" />
</head>
<body>
<div id="terminal"></div>
<style>
html, body {
  width: 100%;
  height: 100%;
  border: none;
  margin: 0;
  padding: 0;
}
#terminal {
  position: relative;
  width: 100%;
  height: 100%;
}
</style>
<script src="hterm/hterm_all.js"></script>
<script>
const { ipcRenderer } = require('electron');

hterm.defaultStorage = new lib.Storage.Memory();
const terminal = new hterm.Terminal('default');

terminal.onTerminalReady = () => {
  const io = terminal.io.push();
  ipcRenderer.on('output', (e, data) => io.print(data));
  io.onVTKeystroke = io.sendString = (str) =>
    ipcRenderer.send('input', str);
  ipcRenderer.send('terminal-ready');
  terminal.installKeyboard();
  
  const prefs = terminal.getPrefs();
  prefs.set('cursor-color', '#FFC');
  prefs.set('cursor-blink', true);
  prefs.set('font-size', 14);
  prefs.set('color-palette-overrides', [
    "#444", "#F40", "#CF0", "#FC0", "#0CF", "#C0F", "#0CF", "#EEE",
    "#888", "#F44", "#0FC", "#FFC", "#44F", "#F8F", "#8CF", "#FFF"
  ]);
};
terminal.decorate(document.getElementById('terminal'));
</script>
</body>
</html>
